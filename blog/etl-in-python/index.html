<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.5.4"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://jacob.verhoeks.org/blog/etl-in-python/"><!-- Primary Meta Tags --><title>Python and modules for ETL jobs on AWS</title><meta name="title" content="Python and modules for ETL jobs on AWS"><meta name="description" content="Python and modules for ETL jobs on AWS"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://jacob.verhoeks.org/blog/etl-in-python/"><meta property="og:title" content="Python and modules for ETL jobs on AWS"><meta property="og:description" content="Python and modules for ETL jobs on AWS"><meta property="og:image" content="https://jacob.verhoeks.org/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://jacob.verhoeks.org/blog/etl-in-python/"><meta property="twitter:title" content="Python and modules for ETL jobs on AWS"><meta property="twitter:description" content="Python and modules for ETL jobs on AWS"><meta property="twitter:image" content="https://jacob.verhoeks.org/blog-placeholder-1.jpg"><style>:root{--accent: #2337ff;--accent-dark: #000d8a;--black: 15, 18, 25;--gray: 96, 115, 159;--gray-light: 229, 233, 240;--gray-dark: 34, 41, 57;--gray-gradient: rgba(var(--gray-light), 50%), #fff;--box-shadow: 0 2px 6px rgba(var(--gray), 25%), 0 8px 24px rgba(var(--gray), 33%), 0 16px 32px rgba(var(--gray), 33%)}@font-face{font-family:Atkinson;src:url(/fonts/atkinson-regular.woff) format("woff");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Atkinson;src:url(/fonts/atkinson-bold.woff) format("woff");font-weight:700;font-style:normal;font-display:swap}body{font-family:Atkinson,sans-serif;margin:0;padding:0;text-align:left;background:linear-gradient(var(--gray-gradient)) no-repeat;background-size:100% 600px;word-wrap:break-word;overflow-wrap:break-word;color:rgb(var(--gray-dark));font-size:20px;line-height:1.7}main{width:720px;max-width:calc(100% - 2em);margin:auto;padding:3em 1em}h1,h2,h3,h4,h5,h6{margin:0 0 .5rem;color:rgb(var(--black));line-height:1.2}h1{font-size:3.052em}h2{font-size:2.441em}h3{font-size:1.953em}h4{font-size:1.563em}h5{font-size:1.25em}strong,b{font-weight:700}a,a:hover{color:var(--accent)}p{margin-bottom:1em}.prose p{margin-bottom:2em}textarea{width:100%;font-size:16px}input{font-size:16px}table{width:100%;border-collapse:collapse;margin:1rem 0}th,td{border:1px solid #ddd;padding:8px;text-align:left}thead{background-color:#f4f4f4}tbody tr:nth-child(2n){background-color:#f9f9f9}tbody tr:hover{background-color:#e0e0e0}img{max-width:100%;height:auto;border-radius:8px}code{padding:2px 5px;background-color:rgb(var(--gray-light));border-radius:2px}pre{padding:1.5em;border-radius:8px}pre>code{all:unset}blockquote{border-left:4px solid var(--accent);padding:0 0 0 20px;margin:0;font-size:1.333em}hr{border:none;border-top:1px solid rgb(var(--gray-light))}@media (max-width: 720px){body{font-size:18px}main{padding:1em}}.sr-only{border:0;padding:0;margin:0;position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);clip-path:inset(50%);white-space:nowrap}a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;text-decoration:underline}header[data-astro-cid-3ef6ksr2]{margin:0;padding:0 1em;background:#fff;box-shadow:0 2px 8px rgba(var(--black),5%)}h2[data-astro-cid-3ef6ksr2]{margin:0;font-size:1em}h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2],h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none}nav[data-astro-cid-3ef6ksr2]{display:flex;align-items:center;justify-content:space-between}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{padding:1em .5em;color:var(--black);border-bottom:4px solid transparent;text-decoration:none}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none;border-bottom-color:var(--accent)}.social-links[data-astro-cid-3ef6ksr2],.social-links[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{display:flex}@media (max-width: 720px){.social-links[data-astro-cid-3ef6ksr2]{display:none}}footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;background:linear-gradient(var(--gray-gradient)) no-repeat;color:rgb(var(--gray));text-align:center}.social-links[data-astro-cid-sz7xmlte]{display:flex;justify-content:center;gap:1em;margin-top:1em}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]{text-decoration:none;color:rgb(var(--gray))}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]:hover{color:rgb(var(--gray-dark))}
main[data-astro-cid-bvzihdzo]{width:calc(100% - 2em);max-width:100%;margin:0}.hero-image[data-astro-cid-bvzihdzo]{width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.prose[data-astro-cid-bvzihdzo]{width:720px;max-width:calc(100% - 2em);margin:auto;padding:1em;color:rgb(var(--gray-dark))}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}
</style></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2><a href="/" data-astro-cid-3ef6ksr2>Jacob&#39;s Blog</a></h2> <div class="internal-links" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Home </a>  <a href="/blog" class="active" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Blog </a>  <a href="/about" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> About </a>  </div> <div class="social-links" data-astro-cid-3ef6ksr2> <a href="https://twitter.com/jverhoeks" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Follow Astro on Twitter</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" data-astro-cid-3ef6ksr2></path></svg> </a> <a href="https://github.com/jverhoeks" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Astro's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> </div> </nav> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo>  </div> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2022-10-23T00:00:00.000Z"> Oct 23, 2022 </time>  </div> <h1 data-astro-cid-bvzihdzo>Python and modules for ETL jobs on AWS</h1> <hr data-astro-cid-bvzihdzo> </div>  <p>Python is a powerfull tool to run ETL jobs on AWS. The 3 main ways are Lambda, Glue (pyspark) and Glue Pythonshell.
Lambda can run max 15 minutes. Glue Pythonshell is a simple environment for run python scripts, the Glue Spark provides a full serverless PySpark environment to run complex scripts.</p>
<h2 id="other-systems">Other systems</h2>
<p>There are many ways to run scripts on AWS, there are out of scope for now.</p>
<ul>
<li>AWS Batch</li>
<li>Fargate</li>
<li>EKS</li>
<li>Amazon Managed Workflows for Apache Airflow</li>
<li>anything custom.</li>
</ul>
<h2 id="adding-packages-options">Adding packages options</h2>
<p>While python is powerfull, you need additional libraries for your code. The most common for ETL processing are NumPy and Pandas. But many others are available for retrieving api’s, parsing files, etc.</p>
<!-- more -->
<p>The installation differs among the job types. On your local development you might use pip or poetry.
This will download the files from the PyPi repo and in some cases this comes with precompiled libraries or c/rust code that’s required to compile.</p>
<p>These are the available methods:</p>





























<table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Zip File</td><td>Package additional libraries as a zip file</td></tr><tr><td>C/Binary</td><td>Add Packages with Binaries/Compiled (like TeraData or pandas)</td></tr><tr><td>pip install</td><td>Run a pip install before start</td></tr><tr><td>pip install private repo</td><td>Use Pip install with a private repo</td></tr><tr><td>Library</td><td>Add a managed library with a set of package</td></tr></tbody></table>
<p>This table shows the support options:</p>





















































<table><thead><tr><th>Type</th><th>Zip file</th><th>C/binary</th><th>install</th><th>install private repo</th><th>Library</th></tr></thead><tbody><tr><td>Lambda</td><td>:white_check_mark:</td><td>:white_check_mark:</td><td>:x:</td><td>:x:</td><td>any layer</td></tr><tr><td>Glue 2</td><td>:white_check_mark:</td><td>:x:</td><td>:white_check_mark:</td><td>:white_check_mark:</td><td></td></tr><tr><td>Glue 3</td><td>:white_check_mark:</td><td>:x:</td><td>:white_check_mark:</td><td>:white_check_mark:</td><td></td></tr><tr><td>Glue Pythonshell 3.6</td><td>:white_check_mark:</td><td>:x:</td><td>:white_check_mark:</td><td>:x:</td><td></td></tr><tr><td>Glue Pythonshell 3.9</td><td>:white_check_mark:</td><td>:x:</td><td>:white_check_mark:</td><td>:x:</td><td>analytics</td></tr></tbody></table>
<h2 id="available-packages">Available packages</h2>
<p>Luckily some packages are installed by default. I compiled an overview for each of the types:</p>
<p>As per 28th Oct 2022 the following packages are available in the runtimes by default. AWSSDKPandas is a lambda layer (formally AwsWrangler) that is now available as an AWSLayer.</p>


















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































<table><thead><tr><th>Package</th><th>glue2</th><th>glue3</th><th>glue pythonshell</th><th>glue pythonshell + analytics</th><th>lambda3.7</th><th>lambda3.8</th><th>lambda3.9</th><th>AWSSDKPandas-2.17</th></tr></thead><tbody><tr><td>Python</td><td>3.7</td><td>3.7</td><td>3.6</td><td>3.9</td><td>3.7</td><td>3.8</td><td>3.9</td><td></td></tr><tr><td>Cython</td><td>0.29.15</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>PyMySQL</td><td>0.9.3</td><td></td><td></td><td>1.0.2</td><td></td><td></td><td></td><td>1.0.2</td></tr><tr><td>SQLAlchemy</td><td></td><td></td><td></td><td>1.4.36</td><td></td><td></td><td></td><td></td></tr><tr><td>aenum</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>3.1.11</td></tr><tr><td>aiobotocore</td><td></td><td>1.4.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>aiohttp</td><td></td><td>3.8.1</td><td></td><td></td><td></td><td></td><td></td><td>3.8.1</td></tr><tr><td>aioitertools</td><td></td><td>0.10.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>aiosignal</td><td></td><td>1.2.0</td><td></td><td></td><td></td><td></td><td></td><td>1.2.0</td></tr><tr><td>asn1crypto</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.5.1</td></tr><tr><td>async-timeout</td><td></td><td>4.0.2</td><td></td><td></td><td></td><td></td><td></td><td>4.0.2</td></tr><tr><td>asynctest</td><td></td><td>0.13.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>attrs</td><td></td><td>21.4.0</td><td></td><td></td><td></td><td></td><td></td><td>22.1.0</td></tr><tr><td>avro</td><td></td><td></td><td></td><td>1.11.0</td><td></td><td></td><td></td><td></td></tr><tr><td>avro-python3</td><td></td><td>1.10.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>awscli</td><td></td><td></td><td>1.23.5</td><td>1.23.5</td><td></td><td></td><td></td><td></td></tr><tr><td>awsgluecustomconnectorpython</td><td></td><td>1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>awsgluedataplanepython</td><td></td><td>1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>awsgluemlentitydetectorwrapperpython</td><td></td><td>1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>awswrangler</td><td></td><td></td><td></td><td>2.15.1</td><td></td><td></td><td></td><td>2.17.0</td></tr><tr><td>backoff</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>2.1.2</td></tr><tr><td>beautifulsoup4</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>4.11.1</td></tr><tr><td>boto3</td><td>1.12.4</td><td>1.18.50</td><td></td><td>1.22.5</td><td>10.20.32</td><td>10.20.32</td><td>10.20.32</td><td></td></tr><tr><td>botocore</td><td>1.15.4</td><td>1.21.50</td><td>1.23.5</td><td>1.23.5</td><td>1.23.32</td><td>1.23.32</td><td>1.23.32</td><td></td></tr><tr><td>certifi</td><td>2019.11.28</td><td>2021.5.30</td><td></td><td></td><td></td><td></td><td></td><td>2022.9.14</td></tr><tr><td>chardet</td><td>3.0.4</td><td>3.0.4</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>charset-normalizer</td><td></td><td>2.1.0</td><td></td><td></td><td></td><td></td><td></td><td>2.0.12</td></tr><tr><td>click</td><td></td><td>8.1.3</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>cycler</td><td>0.10.0</td><td>0.10.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>cython</td><td></td><td>0.29.4</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>decorator</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>5.1.1</td></tr><tr><td>docutils</td><td>0.15.2</td><td>0.17.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>elasticsearch</td><td></td><td></td><td></td><td>8.2.0</td><td></td><td></td><td></td><td></td></tr><tr><td>enum34</td><td>1.1.9</td><td>1.1.10</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>et-xmlfile</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.1.0</td></tr><tr><td>frozenlist</td><td></td><td>1.3.0</td><td></td><td></td><td></td><td></td><td></td><td>1.3.1</td></tr><tr><td>fsspec</td><td>0.6.2</td><td>2021.8.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>gremlinpython</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>3.6.1</td></tr><tr><td>idna</td><td>2.9</td><td>2.10</td><td></td><td></td><td></td><td></td><td></td><td>3.4</td></tr><tr><td>importlib-metadata</td><td></td><td>4.12.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>isodate</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>0.6.1</td></tr><tr><td>jmespath</td><td>0.9.4</td><td>0.10.0</td><td></td><td></td><td></td><td></td><td></td><td>1.0.1</td></tr><tr><td>joblib</td><td>0.14.1</td><td>1.0.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>jsonpath-ng</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.5.3</td></tr><tr><td>kiwisolver</td><td>1.1.0</td><td>1.3.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>lxml</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>4.9.1</td></tr><tr><td>matplotlib</td><td>3.1.3</td><td>3.4.3</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>mpmath</td><td>1.1.0</td><td>1.2.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>multidict</td><td></td><td>6.0.2</td><td></td><td></td><td></td><td></td><td></td><td>6.0.2</td></tr><tr><td>nest-asyncio</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.5.5</td></tr><tr><td>nltk</td><td></td><td>3.6.3</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>numpy</td><td>1.18.1</td><td>1.19.5</td><td></td><td>1.22.3</td><td></td><td></td><td></td><td>1.23.3</td></tr><tr><td>openpyxl</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>3.0.10</td></tr><tr><td>opensearch-py</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>2.0.0</td></tr><tr><td>packaging</td><td></td><td>21.3</td><td></td><td></td><td></td><td></td><td></td><td>21.3</td></tr><tr><td>pandas</td><td>1.0.1</td><td>1.3.2</td><td></td><td>1.4.2</td><td></td><td></td><td></td><td>1.5.0</td></tr><tr><td>patsy</td><td>0.5.1</td><td>0.5.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>pg8000</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.29.1</td></tr><tr><td>pillow</td><td></td><td>9.1.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>pip</td><td></td><td>22.1.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>ply</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>3.11</td></tr><tr><td>pmdarima</td><td>1.5.3</td><td>1.8.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>progressbar2</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>4.0.0</td></tr><tr><td>psycopg2</td><td></td><td></td><td></td><td>2.9.3</td><td></td><td></td><td></td><td></td></tr><tr><td>ptvsd</td><td>4.3.2</td><td>4.3.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>pyarrow</td><td>0.16.0</td><td>5.0.0</td><td></td><td></td><td></td><td></td><td></td><td>8.0.0</td></tr><tr><td>pyathena</td><td></td><td></td><td></td><td>2.5.3</td><td></td><td></td><td></td><td></td></tr><tr><td>pydevd</td><td>1.9.0</td><td>2.5.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>pyhocon</td><td>0.3.54</td><td>0.3.58</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>pymysql</td><td></td><td>1.0.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>pyodbc</td><td></td><td></td><td></td><td>4.0.32</td><td></td><td></td><td></td><td></td></tr><tr><td>pyorc</td><td></td><td></td><td></td><td>0.6.0</td><td></td><td></td><td></td><td></td></tr><tr><td>pyparsing</td><td>2.4.6</td><td>2.4.7</td><td></td><td></td><td></td><td></td><td></td><td>3.0.9</td></tr><tr><td>python-dateutil</td><td>2.8.1</td><td>2.8.2</td><td></td><td></td><td></td><td></td><td></td><td>2.8.2</td></tr><tr><td>python-utils</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>3.3.3</td></tr><tr><td>pytz</td><td>2019.3</td><td>2021.1</td><td></td><td></td><td></td><td></td><td></td><td>2022.1</td></tr><tr><td>pyyaml</td><td></td><td>5.4.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>redshift-connector</td><td></td><td></td><td></td><td>2.0.907</td><td></td><td></td><td></td><td>2.0.908</td></tr><tr><td>regex</td><td></td><td>2022.6.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>requests</td><td>2.23.0</td><td>2.23.0</td><td></td><td>2.27.1</td><td></td><td></td><td></td><td>2.28.0</td></tr><tr><td>requests-aws4auth</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.1.2</td></tr><tr><td>s3fs</td><td>0.4.0</td><td>2021.8.1</td><td></td><td>2022.3.0</td><td></td><td></td><td></td><td></td></tr><tr><td>s3transfer</td><td>0.3.3</td><td>0.5.0</td><td></td><td></td><td></td><td></td><td></td><td>0.6.0</td></tr><tr><td>scikit-learn</td><td>0.22.1</td><td>0.24.2</td><td></td><td>1.0.2</td><td></td><td></td><td></td><td></td></tr><tr><td>scipy</td><td>1.4.1</td><td>1.7.1</td><td></td><td>1.8.0</td><td></td><td></td><td></td><td></td></tr><tr><td>scramp</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.4.1</td></tr><tr><td>setuptools</td><td>45.2.0</td><td>49.1.3</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>six</td><td>1.14.0</td><td>1.16.0</td><td></td><td></td><td></td><td></td><td></td><td>1.16.0</td></tr><tr><td>soupsieve</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>2.3.2.post1</td></tr><tr><td>spark</td><td></td><td>1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>statsmodels</td><td>0.11.1</td><td>0.12.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>subprocess32</td><td>3.5.4</td><td>3.5.4</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>sympy</td><td>1.5.1</td><td>1.8</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>tbats</td><td>1.0.9</td><td>1.1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>threadpoolctl</td><td></td><td>3.1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>tqdm</td><td></td><td>4.64.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>typing-extensions</td><td></td><td>4.2.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>urllib3</td><td>1.25.8</td><td>1.25.11</td><td></td><td></td><td></td><td></td><td></td><td>1.26.12</td></tr><tr><td>wheel</td><td></td><td>0.37.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>wrapt</td><td></td><td>1.14.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>yarl</td><td></td><td>1.7.2</td><td></td><td></td><td></td><td></td><td></td><td>1.8.1</td></tr><tr><td>zipp</td><td></td><td>3.8.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>
<p>Documentation:</p>
<ul>
<li><a href="https://docs.aws.amazon.com/glue/latest/dg/aws-glue-programming-python-libraries.html">https://docs.aws.amazon.com/glue/latest/dg/aws-glue-programming-python-libraries.html</a></li>
<li><a href="https://docs.aws.amazon.com/glue/latest/dg/add-job-python.html">https://docs.aws.amazon.com/glue/latest/dg/add-job-python.html</a></li>
<li><a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html">https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html</a></li>
<li><a href="https://aws-sdk-pandas.readthedocs.io/en/2.17.0/install.html">https://aws-sdk-pandas.readthedocs.io/en/2.17.0/install.html</a></li>
</ul>
<h2 id="adding-packages">Adding packages</h2>
<h3 id="glue">Glue</h3>
<h4 id="additional-python-modules">—additional-python-modules</h4>
<p>Both glue types support the parameter —additional-python-modules, this installs the python module before executing the code. It support the pip format for package.</p>
<p>Example: <code>--additional-python-modules zipp,scikit-learn==0.21.3</code></p>
<p>:exclamation: in the aws documentation it mention also the option to install an S3 packages with this parameter, but this isn’t supported.
<code>--additional-python-modules s3://aws-glue-native-spark/tests/j4.2/fbprophet-0.6-py3-none-any.whl</code>
This results in <em>can’t install /tmp/pyglue/s3://aws-glue-native-spark/tests/j4.2/fbprophet-0.6-py3-none-any.whl</em></p>
<h4 id="python-modules-installer-option">—python-modules-installer-option</h4>
<p>This supported all the paramaters from pip. It give the option to use a private pip repo.</p>
<p>Example: <code>--python-modules-installer-option --index-url=https://user:pass@repo.local/artifactory/api/pypi/python-hosted/simple --extra-index-url=https://user:pass@repos.local/artifactory/api/pypi/python-hosted/simple --trusted-host=repo.local</code></p>
<p>:exclamation: this is only supported on Glue ETL jobs.</p>
<p><a href="https://docs.aws.amazon.com/glue/latest/dg/add-job-python.html#create-python-extra-library">https://docs.aws.amazon.com/glue/latest/dg/add-job-python.html#create-python-extra-library</a></p>
<h4 id="library-set">library-set</h4>
<p><code>library-set</code>  , no <code>--</code> prefix, is a new parameter, for pythonshell jobs 3.9.
The only available library at the moment is: <code>analytics</code></p>
<h3 id="moduleszip">Modules.zip</h3>
<p>Create a requirements.txt</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.zka5w.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="python"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8;--1:#24292E">pandas</span><span style="--0:#F97583;--1:#BF3441">==</span><span style="--0:#79B8FF;--1:#005CC5">1.4</span><span style="--0:#E1E4E8;--1:#24292E">.2</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="pandas==1.4.2"><div></div></button></div></figure></div>
<p>Run this to get and build the packages wil the linux dependencies for python 3.9
If you run the pip install on a mac without docker, you end up with mac binaries that don’t work in the etl job.</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#B392F0;--1:#6F42C1">docker</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">run</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">--rm</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">-v</span><span style="--0:#E1E4E8;--1:#24292E"> ${PWD}</span><span style="--0:#9ECBFF;--1:#032F62">:/var/task</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#9ECBFF;--1:#032F62">public.ecr.aws/sam/build-python3.9</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">\</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#9ECBFF;--1:#032F62">sh</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">-c</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"pip install --no-deps -r requirements.txt -t python/lib/python3.9/site-packages/; exit"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#B392F0;--1:#6F42C1">zip</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">-r</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">../module.zip</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">python</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="docker run --rm -v ${PWD}:/var/task \  public.ecr.aws/sam/build-python3.9 \  sh -c &#x22;pip install --no-deps -r requirements.txt -t python/lib/python3.9/site-packages/; exit&#x22;zip -r ../module.zip python"><div></div></button></div></figure></div>
<h3 id="lambda-layers">Lambda Layers</h3>
<p>AWSSDKPandas formally AWSWrangler is now available to select as a default AWSLayer, available in all regions.</p>
<p><img src="/images/awslayers.png" alt="AWS layer"></p>
<p>Custom Layers</p>
<p>todo.</p>  </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 Jacob Verhoeks. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://twitter.com/jverhoeks" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Follow Astro on Twitter</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/twitter" data-astro-cid-sz7xmlte><path fill="currentColor" d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://github.com/jverhoeks" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Astro's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </footer>  </body></html>