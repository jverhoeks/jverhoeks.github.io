


<!DOCTYPE html>
<html lang="en-us">

  <head>
    
    

    
    
  <link href="http://gmpg.org/xfn/11" rel="profile">

    
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">
  <meta name="description" content="Jacobs Tech Blog Tech, Cloud and Programming">


    
    
<title>
    
    Python and modules for ETL jobs on AWS &middot; Jacobs Tech Blog
    
</title>



    
  <!-- CSS -->
  <link rel="stylesheet" href="https:&#x2F;&#x2F;jacob.verhoeks.org/main.css">
  <script src="https://kit.fontawesome.com/ac557d6010.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <script src="https://getinsights.io/js/insights.js"></script>
  <script>
  insights.init('t6rLVGW6KcRuQdn8');
  insights.trackPages();
  </script>


    
<meta name="theme-color" content="#ffffff">

  <!-- Icons -->
  <link rel="shortcut icon" href="https:&#x2F;&#x2F;jacob.verhoeks.org/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="https://jacob.verhoeks.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://jacob.verhoeks.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://jacob.verhoeks.org/favicon-16x16.png">


    

  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">


	


	



    



    
  

  



  



  










	


	


<link rel="canonical" href="https://jacob.verhoeks.org/etl-in-python/">



  <meta name="twitter:card" content="summary_large_image">
  
    <meta name="twitter:image" content="https://jacob.verhoeks.org/&#x2F;apple-touch-icon.png">
  
  <meta name="twitter:title" content="Python and modules for ETL jobs on AWS">
  <meta name="twitter:description" content="Python and modules for ETL jobs on AWS">
  <meta name="twitter:site" content="@zamwan">
  <meta name="twitter:creator" content="@zamwan">

  <meta property="og:title" content="Python and modules for ETL jobs on AWS">
  <meta property="og:description" content="Python and modules for ETL jobs on AWS">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://jacob.verhoeks.org/etl-in-python/">

  
    <meta property="og:image" content="https://jacob.verhoeks.org/&#x2F;apple-touch-icon.png">
  

  <meta property="og:updated_time" content="2021-05-01T08:08:08+08:00">
  <meta property="og:site_name" content="Python and modules for ETL jobs on AWS">

  

  

  
  <meta property="og:locale" content="en_US">



  
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "url": "/etl-in-python/",
      "name": "Python and modules for ETL jobs on AWS",
      "logo": "/etl-in-python/logo-doks.png",
      "sameAs": [
        "https://twitter.com/zamwan",
        "https://www.linkedin.com/in/jacobverhoeks/",
        "https://github.com/jverhoeks"
      ]
    }
    </script>
  
  
  







<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
    
      
      
        
        
        
        
        
        
        
        
        
        
        
        
        
        
          {
            "@type": "ListItem",
            "position":  1 ,
            "name": "Home",
            "item": "https://jacob.verhoeks.org/"
          },
          
          
          {
            "@type": "ListItem",
            "position":  2 ,
            "name": "Etl In Python",
            "item": "https://jacob.verhoeks.org/etl-in-python/"
          }
        
      
    
   ]
  }
</script>



    
  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">


    
  
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  

  </head>

  <body>

    
    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
        styles, `#sidebar-checkbox` for behavior. -->
    <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

    <!-- Toggleable sidebar -->
    <div class="sidebar" id="sidebar">
      
  <div class="sidebar-item">
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
        <a href="https://gravatar.com/2ec5bb1c3a7caaeff2a4e57872a28f85">
          <img src="https://www.gravatar.com/avatar/2ec5bb1c3a7caaeff2a4e57872a28f85?s=350" title="View on Gravatar" alt="View on Gravatar" />
        </a>
      </div>
      <div class="sidebar-personal-info-section">
        <p>🇳🇱 Cloud Architect & AWS Community Builder</p>
      </div>
      
      
      
      <div class="sidebar-personal-info-section">
        <p> Follow me: <br />
        
        
        
        <a href="https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;jacobverhoeks&#x2F;">
          <i class="fa fa-linkedin" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;jverhoeks">
          <i class="fa fa-github" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="https:&#x2F;&#x2F;twitter.com&#x2F;zamwan">
          <i class="fa fa-twitter" aria-hidden="true"></i>
        </a>
        
        |
        
        </p>
      </div>
      
    </div>
  </div>
 

      
   
  <nav class="sidebar-nav">
    
      
      
      
        
      

      <span class="">
        <a class="sidebar-nav-item " href="https:&#x2F;&#x2F;jacob.verhoeks.org&#x2F;">
          Home
        </a>

        
      </span>

    
      
      
      
        
      

      <span class="">
        <a class="sidebar-nav-item " href="https:&#x2F;&#x2F;jacob.verhoeks.org&#x2F;categories&#x2F;">
          Categories
        </a>

        
      </span>

    
      
      
      
        
      

      <span class="">
        <a class="sidebar-nav-item " href="https:&#x2F;&#x2F;jacob.verhoeks.org&#x2F;tags&#x2F;">
          Tags
        </a>

        
      </span>

    
      
      
      
        
      

      <span class="">
        <a class="sidebar-nav-item " href="https:&#x2F;&#x2F;jacob.verhoeks.org&#x2F;about&#x2F;">
          About
        </a>

        
      </span>

    
  </nav>



      
  <div class="sidebar-item">
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
        <a href="https://aws.amazon.com/developer/community/community-builders/">
          <img src="/img/cb-badge.png" title="AWS Community Builders" alt="AWS Community Builders" />
        </a>
      </div>
    </div>
  </div>
 

      
  <div class="sidebar-item sidebar-item-last">
    <p>
    &copy; 2022 Jacob Verhoeks. This work is licensed under <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a>.
    </p>
  </div>



    </div>
    

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">

      

      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="https:&#x2F;&#x2F;jacob.verhoeks.org/" title="Home" title="Jacobs Tech Blog">
              <img class="masthead-logo" src="https:&#x2F;&#x2F;jacob.verhoeks.org&#x2F;logo2.png" alt="logo"/>
            </a>
            <small>Tech, Cloud and Programming</small>
            
          </h3>
        </div>
      </div>



      <div class="container content">

        
	      <div class="post">
          <h1 class="post-title">Python and modules for ETL jobs on AWS</h1>
          <span class="post-date">2022-10-23</span>

           |
            
            <a href="https://jacob.verhoeks.org/tags/python/" class="post-tag">python</a>
            
            <a href="https://jacob.verhoeks.org/tags/etl/" class="post-tag">etl</a>
            
            <a href="https://jacob.verhoeks.org/tags/glue/" class="post-tag">glue</a>
            
          
          <article>
            <p>Python is a powerfull tool to run ETL jobs on AWS. The 3 main ways are Lambda, Glue (pyspark) and Glue Pythonshell.
Lambda can run max 15 minutes. Glue Pythonshell is a simple environment for run python scripts, the Glue Spark provides a full serverless PySpark environment to run complex scripts.</p>
<h2 id="other-systems">Other systems</h2>
<p>There are many ways to run scripts on AWS, there are out of scope for now.</p>
<ul>
<li>AWS Batch</li>
<li>Fargate</li>
<li>EKS</li>
<li>Amazon Managed Workflows for Apache Airflow</li>
<li>anything custom.</li>
</ul>
<h2 id="adding-packages-options">Adding packages options</h2>
<p>While python is powerfull, you need additional libraries for your code. The most common for ETL processing are NumPy and Pandas. But many others are available for retrieving api's, parsing files, etc.</p>
<span id="continue-reading"></span>
<p>The installation differs among the job types. On your local development you might use pip or poetry.
This will download the files from the PyPi repo and in some cases this comes with precompiled libraries or c/rust code that's required to compile.</p>
<p>These are the available methods:</p>
<table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>Zip File</td><td>Package additional libraries as a zip file</td></tr>
<tr><td>C/Binary</td><td>Add Packages with Binaries/Compiled (like TeraData or pandas)</td></tr>
<tr><td>pip install</td><td>Run a pip install before start</td></tr>
<tr><td>pip install private repo</td><td>Use Pip install with a private repo</td></tr>
<tr><td>Library</td><td>Add a managed library with a set of package</td></tr>
</tbody></table>
<p>This table shows the support options:</p>
<table><thead><tr><th>Type</th><th>Zip file</th><th>C/binary</th><th>install</th><th>install private repo</th><th>Library</th></tr></thead><tbody>
<tr><td>Lambda</td><td>✅</td><td>✅</td><td>❌</td><td>❌</td><td>any layer</td></tr>
<tr><td>Glue 2</td><td>✅</td><td>❌</td><td>✅</td><td>✅</td><td></td></tr>
<tr><td>Glue 3</td><td>✅</td><td>❌</td><td>✅</td><td>✅</td><td></td></tr>
<tr><td>Glue Pythonshell 3.6</td><td>✅</td><td>❌</td><td>✅</td><td>❌</td><td></td></tr>
<tr><td>Glue Pythonshell 3.9</td><td>✅</td><td>❌</td><td>✅</td><td>❌</td><td>analytics</td></tr>
</tbody></table>
<h2 id="available-packages">Available packages</h2>
<p>Luckily some packages are installed by default. I compiled an overview for each of the types:</p>
<p>As per 28th Oct 2022 the following packages are available in the runtimes by default. AWSSDKPandas is a lambda layer (formally AwsWrangler) that is now available as an AWSLayer.</p>
<table><thead><tr><th>Package</th><th>glue2</th><th>glue3</th><th>glue pythonshell</th><th>glue pythonshell + analytics</th><th>lambda3.7</th><th>lambda3.8</th><th>lambda3.9</th><th>AWSSDKPandas-2.17</th></tr></thead><tbody>
<tr><td>Python</td><td>3.7</td><td>3.7</td><td>3.6</td><td>3.9</td><td>3.7</td><td>3.8</td><td>3.9</td><td></td></tr>
<tr><td>Cython</td><td>0.29.15</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>PyMySQL</td><td>0.9.3</td><td></td><td></td><td>1.0.2</td><td></td><td></td><td></td><td>1.0.2</td></tr>
<tr><td>SQLAlchemy</td><td></td><td></td><td></td><td>1.4.36</td><td></td><td></td><td></td><td></td></tr>
<tr><td>aenum</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>3.1.11</td></tr>
<tr><td>aiobotocore</td><td></td><td>1.4.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>aiohttp</td><td></td><td>3.8.1</td><td></td><td></td><td></td><td></td><td></td><td>3.8.1</td></tr>
<tr><td>aioitertools</td><td></td><td>0.10.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>aiosignal</td><td></td><td>1.2.0</td><td></td><td></td><td></td><td></td><td></td><td>1.2.0</td></tr>
<tr><td>asn1crypto</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.5.1</td></tr>
<tr><td>async-timeout</td><td></td><td>4.0.2</td><td></td><td></td><td></td><td></td><td></td><td>4.0.2</td></tr>
<tr><td>asynctest</td><td></td><td>0.13.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>attrs</td><td></td><td>21.4.0</td><td></td><td></td><td></td><td></td><td></td><td>22.1.0</td></tr>
<tr><td>avro</td><td></td><td></td><td></td><td>1.11.0</td><td></td><td></td><td></td><td></td></tr>
<tr><td>avro-python3</td><td></td><td>1.10.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>awscli</td><td></td><td></td><td>1.23.5</td><td>1.23.5</td><td></td><td></td><td></td><td></td></tr>
<tr><td>awsgluecustomconnectorpython</td><td></td><td>1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>awsgluedataplanepython</td><td></td><td>1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>awsgluemlentitydetectorwrapperpython</td><td></td><td>1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>awswrangler</td><td></td><td></td><td></td><td>2.15.1</td><td></td><td></td><td></td><td>2.17.0</td></tr>
<tr><td>backoff</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>2.1.2</td></tr>
<tr><td>beautifulsoup4</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>4.11.1</td></tr>
<tr><td>boto3</td><td>1.12.4</td><td>1.18.50</td><td></td><td>1.22.5</td><td>10.20.32</td><td>10.20.32</td><td>10.20.32</td><td></td></tr>
<tr><td>botocore</td><td>1.15.4</td><td>1.21.50</td><td>1.23.5</td><td>1.23.5</td><td>1.23.32</td><td>1.23.32</td><td>1.23.32</td><td></td></tr>
<tr><td>certifi</td><td>2019.11.28</td><td>2021.5.30</td><td></td><td></td><td></td><td></td><td></td><td>2022.9.14</td></tr>
<tr><td>chardet</td><td>3.0.4</td><td>3.0.4</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>charset-normalizer</td><td></td><td>2.1.0</td><td></td><td></td><td></td><td></td><td></td><td>2.0.12</td></tr>
<tr><td>click</td><td></td><td>8.1.3</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>cycler</td><td>0.10.0</td><td>0.10.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>cython</td><td></td><td>0.29.4</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>decorator</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>5.1.1</td></tr>
<tr><td>docutils</td><td>0.15.2</td><td>0.17.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>elasticsearch</td><td></td><td></td><td></td><td>8.2.0</td><td></td><td></td><td></td><td></td></tr>
<tr><td>enum34</td><td>1.1.9</td><td>1.1.10</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>et-xmlfile</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.1.0</td></tr>
<tr><td>frozenlist</td><td></td><td>1.3.0</td><td></td><td></td><td></td><td></td><td></td><td>1.3.1</td></tr>
<tr><td>fsspec</td><td>0.6.2</td><td>2021.8.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>gremlinpython</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>3.6.1</td></tr>
<tr><td>idna</td><td>2.9</td><td>2.10</td><td></td><td></td><td></td><td></td><td></td><td>3.4</td></tr>
<tr><td>importlib-metadata</td><td></td><td>4.12.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>isodate</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>0.6.1</td></tr>
<tr><td>jmespath</td><td>0.9.4</td><td>0.10.0</td><td></td><td></td><td></td><td></td><td></td><td>1.0.1</td></tr>
<tr><td>joblib</td><td>0.14.1</td><td>1.0.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>jsonpath-ng</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.5.3</td></tr>
<tr><td>kiwisolver</td><td>1.1.0</td><td>1.3.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>lxml</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>4.9.1</td></tr>
<tr><td>matplotlib</td><td>3.1.3</td><td>3.4.3</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>mpmath</td><td>1.1.0</td><td>1.2.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>multidict</td><td></td><td>6.0.2</td><td></td><td></td><td></td><td></td><td></td><td>6.0.2</td></tr>
<tr><td>nest-asyncio</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.5.5</td></tr>
<tr><td>nltk</td><td></td><td>3.6.3</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>numpy</td><td>1.18.1</td><td>1.19.5</td><td></td><td>1.22.3</td><td></td><td></td><td></td><td>1.23.3</td></tr>
<tr><td>openpyxl</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>3.0.10</td></tr>
<tr><td>opensearch-py</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>2.0.0</td></tr>
<tr><td>packaging</td><td></td><td>21.3</td><td></td><td></td><td></td><td></td><td></td><td>21.3</td></tr>
<tr><td>pandas</td><td>1.0.1</td><td>1.3.2</td><td></td><td>1.4.2</td><td></td><td></td><td></td><td>1.5.0</td></tr>
<tr><td>patsy</td><td>0.5.1</td><td>0.5.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>pg8000</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.29.1</td></tr>
<tr><td>pillow</td><td></td><td>9.1.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>pip</td><td></td><td>22.1.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>ply</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>3.11</td></tr>
<tr><td>pmdarima</td><td>1.5.3</td><td>1.8.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>progressbar2</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>4.0.0</td></tr>
<tr><td>psycopg2</td><td></td><td></td><td></td><td>2.9.3</td><td></td><td></td><td></td><td></td></tr>
<tr><td>ptvsd</td><td>4.3.2</td><td>4.3.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>pyarrow</td><td>0.16.0</td><td>5.0.0</td><td></td><td></td><td></td><td></td><td></td><td>8.0.0</td></tr>
<tr><td>pyathena</td><td></td><td></td><td></td><td>2.5.3</td><td></td><td></td><td></td><td></td></tr>
<tr><td>pydevd</td><td>1.9.0</td><td>2.5.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>pyhocon</td><td>0.3.54</td><td>0.3.58</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>pymysql</td><td></td><td>1.0.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>pyodbc</td><td></td><td></td><td></td><td>4.0.32</td><td></td><td></td><td></td><td></td></tr>
<tr><td>pyorc</td><td></td><td></td><td></td><td>0.6.0</td><td></td><td></td><td></td><td></td></tr>
<tr><td>pyparsing</td><td>2.4.6</td><td>2.4.7</td><td></td><td></td><td></td><td></td><td></td><td>3.0.9</td></tr>
<tr><td>python-dateutil</td><td>2.8.1</td><td>2.8.2</td><td></td><td></td><td></td><td></td><td></td><td>2.8.2</td></tr>
<tr><td>python-utils</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>3.3.3</td></tr>
<tr><td>pytz</td><td>2019.3</td><td>2021.1</td><td></td><td></td><td></td><td></td><td></td><td>2022.1</td></tr>
<tr><td>pyyaml</td><td></td><td>5.4.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>redshift-connector</td><td></td><td></td><td></td><td>2.0.907</td><td></td><td></td><td></td><td>2.0.908</td></tr>
<tr><td>regex</td><td></td><td>2022.6.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>requests</td><td>2.23.0</td><td>2.23.0</td><td></td><td>2.27.1</td><td></td><td></td><td></td><td>2.28.0</td></tr>
<tr><td>requests-aws4auth</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.1.2</td></tr>
<tr><td>s3fs</td><td>0.4.0</td><td>2021.8.1</td><td></td><td>2022.3.0</td><td></td><td></td><td></td><td></td></tr>
<tr><td>s3transfer</td><td>0.3.3</td><td>0.5.0</td><td></td><td></td><td></td><td></td><td></td><td>0.6.0</td></tr>
<tr><td>scikit-learn</td><td>0.22.1</td><td>0.24.2</td><td></td><td>1.0.2</td><td></td><td></td><td></td><td></td></tr>
<tr><td>scipy</td><td>1.4.1</td><td>1.7.1</td><td></td><td>1.8.0</td><td></td><td></td><td></td><td></td></tr>
<tr><td>scramp</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>1.4.1</td></tr>
<tr><td>setuptools</td><td>45.2.0</td><td>49.1.3</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>six</td><td>1.14.0</td><td>1.16.0</td><td></td><td></td><td></td><td></td><td></td><td>1.16.0</td></tr>
<tr><td>soupsieve</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>2.3.2.post1</td></tr>
<tr><td>spark</td><td></td><td>1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>statsmodels</td><td>0.11.1</td><td>0.12.2</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>subprocess32</td><td>3.5.4</td><td>3.5.4</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>sympy</td><td>1.5.1</td><td>1.8</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>tbats</td><td>1.0.9</td><td>1.1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>threadpoolctl</td><td></td><td>3.1.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>tqdm</td><td></td><td>4.64.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>typing-extensions</td><td></td><td>4.2.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>urllib3</td><td>1.25.8</td><td>1.25.11</td><td></td><td></td><td></td><td></td><td></td><td>1.26.12</td></tr>
<tr><td>wheel</td><td></td><td>0.37.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>wrapt</td><td></td><td>1.14.1</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>yarl</td><td></td><td>1.7.2</td><td></td><td></td><td></td><td></td><td></td><td>1.8.1</td></tr>
<tr><td>zipp</td><td></td><td>3.8.0</td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
</tbody></table>
<p>Documentation:</p>
<ul>
<li><a rel="noopener" target="_blank" href="https://docs.aws.amazon.com/glue/latest/dg/aws-glue-programming-python-libraries.html">https://docs.aws.amazon.com/glue/latest/dg/aws-glue-programming-python-libraries.html</a></li>
<li><a rel="noopener" target="_blank" href="https://docs.aws.amazon.com/glue/latest/dg/add-job-python.html">https://docs.aws.amazon.com/glue/latest/dg/add-job-python.html</a></li>
<li><a rel="noopener" target="_blank" href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html">https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html</a></li>
<li><a rel="noopener" target="_blank" href="https://aws-sdk-pandas.readthedocs.io/en/2.17.0/install.html">https://aws-sdk-pandas.readthedocs.io/en/2.17.0/install.html</a></li>
</ul>
<h2 id="adding-packages">Adding packages</h2>
<h3 id="glue">Glue</h3>
<h4 id="additional-python-modules">--additional-python-modules</h4>
<p>Both glue types support the parameter --additional-python-modules, this installs the python module before executing the code. It support the pip format for package.</p>
<p>Example: <code>--additional-python-modules zipp,scikit-learn==0.21.3</code></p>
<p>❗ in the aws documentation it mention also the option to install an S3 packages with this parameter, but this isn't supported.
<code>--additional-python-modules s3://aws-glue-native-spark/tests/j4.2/fbprophet-0.6-py3-none-any.whl</code>
This results in <em>can't install /tmp/pyglue/s3://aws-glue-native-spark/tests/j4.2/fbprophet-0.6-py3-none-any.whl</em></p>
<h4 id="python-modules-installer-option">--python-modules-installer-option</h4>
<p>This supported all the paramaters from pip. It give the option to use a private pip repo.</p>
<p>Example: <code>--python-modules-installer-option --index-url=https://user:pass@repo.local/artifactory/api/pypi/python-hosted/simple --extra-index-url=https://user:pass@repos.local/artifactory/api/pypi/python-hosted/simple --trusted-host=repo.local</code></p>
<p>❗ this is only supported on Glue ETL jobs.</p>
<p><a rel="noopener" target="_blank" href="https://docs.aws.amazon.com/glue/latest/dg/add-job-python.html#create-python-extra-library">https://docs.aws.amazon.com/glue/latest/dg/add-job-python.html#create-python-extra-library</a></p>
<h4 id="library-set">library-set</h4>
<p><code>library-set</code>  , no <code>--</code> prefix, is a new parameter, for pythonshell jobs 3.9.
The only available library at the moment is: <code>analytics</code></p>
<h3 id="modules-zip">Modules.zip</h3>
<p>Create a requirements.txt</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>pandas==</span><span style="color:#d08770;">1.4.2
</span></code></pre>
<p>Run this to get and build the packages wil the linux dependencies for python 3.9
If you run the pip install on a mac without docker, you end up with mac binaries that don't work in the etl job.</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">docker</span><span> run</span><span style="color:#bf616a;"> --rm -v </span><span>${</span><span style="color:#bf616a;">PWD</span><span>}:/var/task \
</span><span>  public.ecr.aws/sam/build-python3.9 \
</span><span>  sh</span><span style="color:#bf616a;"> -c </span><span>&quot;</span><span style="color:#a3be8c;">pip install --no-deps -r requirements.txt -t python/lib/python3.9/site-packages/; exit</span><span>&quot;
</span><span>
</span><span style="color:#bf616a;">zip -r</span><span> ../module.zip python
</span></code></pre>
<h3 id="lambda-layers">Lambda Layers</h3>
<p>AWSSDKPandas formally AWSWrangler is now available to select as a default AWSLayer, available in all regions.</p>
<p><img src="/img/awslayers.png" alt="AWS layer" /></p>
<p>Custom Layers</p>
<p>todo.</p>

          </article>
        </div>

        <div class="related">
          <h2>Other Posts</h2>
          <ul class="related-posts">
            <li class="previous">
            
            </li>
            <li class="next">
            
            </li>
          </ul>
        </div>

        


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"> </label>

    
    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        // set default sidebar if widescreen
        if(window.innerWidth > 1400)
          checkbox.checked = true;

        window.addEventListener('resize',function(e) {
          if(window.innerWidth > 1400 && !checkbox.checked )
              checkbox.checked = true;  
          if(window.innerWidth < 1400 && checkbox.checked )
              checkbox.checked = false;  
        },true);


        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>



  </body>

  
 


</html>
